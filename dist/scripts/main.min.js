async function showCitiesList(e){const t=document.getElementById(e);try{const e=await fetch("https://shift-backend.onrender.com/delivery/points"),n=await e.json();console.log("Список городов:"),n.points.forEach((e=>{console.log(e.name)})),t.innerHTML="";const o=document.createElement("option");o.value="",o.text="Выберите город",t.appendChild(o),n.points.forEach((e=>{const n=document.createElement("option");n.value=e.id,n.text=e.name,t.appendChild(n)}))}catch(e){console.error("Ошибка при загрузке городов:",e)}}async function showPackageList(e){const t=document.getElementById(e);try{const e=await fetch("https://shift-backend.onrender.com/delivery/package/types"),n=await e.json();console.log("Список размеров посылки:"),n.packages.forEach((e=>{console.log(e.name)})),t.innerHTML="";const o=document.createElement("option");o.value="",o.text="Выберите размер посылки",t.appendChild(o),n.packages.forEach((e=>{const n=document.createElement("option");n.value=e.id,n.text=e.name,t.appendChild(n)}))}catch(e){console.error("Ошибка при загрузке размеров:",e)}}async function calculateDelivery(){try{const e=document.getElementById("fromCity"),t=document.getElementById("toCity"),n=document.getElementById("packageSize"),o=e.value,a=t.value,c=n.value;if(console.log(o),console.log(a),console.log(c),!o||!a||!c)return void alert("Пожалуйста, выберите все необходимые параметры.");const i=await getPointCoordinates(o),s=await getPointCoordinates(a),l=await getPackageDetails(c);console.log(i),console.log(s),console.log(l);const r={package:{length:l.length,width:l.width,weight:l.weight,height:l.height},senderPoint:i,receiverPoint:s},d=await fetch("https://shift-backend.onrender.com/delivery/calc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),h=await d.json();h.success?(displayCalculationResult(h.options),console.log(h)):console.error("Ошибка при расчете доставки:",h.reason)}catch(e){console.error("Ошибка при расчете доставки:",e)}}async function getPointCoordinates(e){try{const t=await fetch("https://shift-backend.onrender.com/delivery/points"),n=(await t.json()).points.find((t=>t.id===e));return{latitude:n.latitude,longitude:n.longitude}}catch(e){return console.error("Ошибка при получении координат города:",e),{}}}async function getPackageDetails(e){try{const t=await fetch("https://shift-backend.onrender.com/delivery/package/types"),n=(await t.json()).packages.find((t=>t.id===e));return{length:n.length,width:n.width,weight:n.weight,height:n.height}}catch(e){return console.error("Ошибка при получении данных о посылке:",e),{}}}function displayCalculationResult(e){const t=document.getElementById("resultContainer");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.innerHTML=`\n            <p>Вариант: ${e.name}</p>\n            <p>Тип: ${e.type}</p>\n            <p>Стоимость: ${e.price} руб.</p>\n            <p>Срок доставки: ${e.days} дней</p>\n        `,t.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(()=>{showCitiesList("fromCity"),showCitiesList("toCity"),showPackageList("packageSize")}));